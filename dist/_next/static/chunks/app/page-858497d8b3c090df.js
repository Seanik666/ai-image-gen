(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4984:(e,a,t)=>{Promise.resolve().then(t.bind(t,9401))},9401:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>L});var l=t(5155),r=t(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,r.forwardRef)((e,a)=>{let{color:t="currentColor",size:l=24,strokeWidth:s=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:h,...x}=e;return(0,r.createElement)("svg",{ref:a,...n,width:l,height:l,stroke:t,strokeWidth:c?24*Number(s)/Number(l):s,className:i("lucide",d),...x},[...h.map(e=>{let[a,t]=e;return(0,r.createElement)(a,t)}),...Array.isArray(o)?o:[o]])}),d=(e,a)=>{let t=(0,r.forwardRef)((t,l)=>{let{className:n,...d}=t;return(0,r.createElement)(c,{ref:l,iconNode:a,className:i("lucide-".concat(s(e)),n),...d})});return t.displayName="".concat(e),t},o=d("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),h=d("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),x=d("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),m=d("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),y=d("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),g=d("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),p=d("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),u=d("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),f=d("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),b=d("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),v=d("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),j=d("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),w=d("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),N=d("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),k=[{name:"1:1",width:1024,height:1024},{name:"4:3",width:1024,height:768},{name:"3:4",width:768,height:1024},{name:"16:9",width:1024,height:576},{name:"9:16",width:576,height:1024}],C=[{id:"default",name:"默认",icon:o},{id:"anime",name:"动漫",icon:h},{id:"realistic",name:"写实",icon:x},{id:"artistic",name:"艺术",icon:m},{id:"cyberpunk",name:"赛博朋克",icon:y}],M=[{id:"standard",name:"标准",desc:"快速生成"},{id:"high",name:"高清",desc:"更高质量"},{id:"ultra",name:"超清",desc:"最佳效果"}];async function S(e,a,t){await new Promise(e=>setTimeout(e,2e3));let l=a.width,r=a.height,s=a.seed||Math.floor(1e4*Math.random());return"https://picsum.photos/seed/".concat(s,"/").concat(l,"/").concat(r)}function L(){var e,a;let[t,s]=(0,r.useState)(""),[i,n]=(0,r.useState)(!1),[c,d]=(0,r.useState)([]),[o,h]=(0,r.useState)(null),[x,y]=(0,r.useState)(!1),[L,z]=(0,r.useState)(!1),[A,q]=(0,r.useState)(null),[E,R]=(0,r.useState)(null),[D,H]=(0,r.useState)({width:1024,height:1024,style:"default",quality:"high"}),I=(0,r.useRef)(null);(0,r.useRef)(null),(0,r.useEffect)(()=>{let e=localStorage.getItem("ai-image-history");if(e)try{let a=JSON.parse(e);d(a)}catch(e){console.error("Failed to load history:",e)}},[]),(0,r.useEffect)(()=>{localStorage.setItem("ai-image-history",JSON.stringify(c))},[c]);let O=async()=>{if(t.trim()&&!i){n(!0);try{let e=await S(t,D,A||void 0),a={id:Date.now().toString(),url:e,prompt:t.trim(),timestamp:Date.now(),params:{...D}};d(e=>[a,...e]),h(a),s(""),q(null),R(null)}catch(e){console.error("Generation failed:",e),alert("生成失败，请重试")}finally{n(!1)}}},U=async e=>{try{let a=await fetch(e.url),t=await a.blob(),l=window.URL.createObjectURL(t),r=document.createElement("a");r.href=l,r.download="ai-image-".concat(e.id,".png"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(l)}catch(e){console.error("Download failed:",e)}},_=async e=>{if(navigator.share)try{await navigator.share({title:"AI 生成的图像",text:e.prompt,url:e.url})}catch(e){console.error("Share failed:",e)}else navigator.clipboard.writeText(e.url),alert("链接已复制到剪贴板")},V=e=>new Date(e).toLocaleString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,l.jsxs)("div",{className:"flex h-screen bg-white",children:[(0,l.jsx)("aside",{className:"fixed inset-y-0 left-0 z-50 w-80 bg-gray-50 border-r border-gray-200 transform transition-transform duration-300 lg:relative lg:transform-none ".concat(x?"translate-x-0":"-translate-x-full lg:hidden"),children:(0,l.jsxs)("div",{className:"flex flex-col h-full",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(g,{className:"w-5 h-5 text-gray-600"}),(0,l.jsx)("span",{className:"font-semibold text-gray-800",children:"历史记录"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[c.length>0&&(0,l.jsx)("button",{onClick:()=>{confirm("确定要清空所有历史记录吗？")&&(d([]),h(null))},className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"清空历史",children:(0,l.jsx)(p,{className:"w-4 h-4"})}),(0,l.jsx)("button",{onClick:()=>y(!1),className:"p-2 text-gray-400 hover:text-gray-600 lg:hidden",children:(0,l.jsx)(u,{className:"w-5 h-5"})})]})]}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:0===c.length?(0,l.jsxs)("div",{className:"text-center text-gray-400 py-8",children:[(0,l.jsx)(f,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,l.jsx)("p",{children:"暂无历史记录"})]}):c.map(e=>(0,l.jsx)("button",{onClick:()=>h(e),className:"w-full text-left p-3 rounded-xl transition-all ".concat((null==o?void 0:o.id)===e.id?"bg-white shadow-md ring-1 ring-gray-200":"hover:bg-white hover:shadow-sm"),children:(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("img",{src:e.url,alt:e.prompt,className:"w-16 h-16 object-cover rounded-lg bg-gray-200"}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("p",{className:"text-sm text-gray-800 line-clamp-2 mb-1",children:e.prompt}),(0,l.jsx)("p",{className:"text-xs text-gray-400",children:V(e.timestamp)})]})]})},e.id))})]})}),(0,l.jsxs)("main",{className:"flex-1 flex flex-col min-w-0",children:[(0,l.jsxs)("header",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("button",{onClick:()=>y(!0),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg lg:hidden",children:(0,l.jsx)(g,{className:"w-5 h-5"})}),(0,l.jsxs)("button",{onClick:()=>y(!x),className:"hidden lg:flex items-center gap-2 px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:[(0,l.jsx)(g,{className:"w-4 h-4"}),(0,l.jsx)("span",{className:"text-sm",children:"历史"})]})]}),(0,l.jsx)("h1",{className:"text-lg font-semibold text-gray-800",children:"AI 图像生成器"}),(0,l.jsx)("button",{onClick:()=>z(!L),className:"p-2 rounded-lg transition-colors ".concat(L?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-100"),children:(0,l.jsx)(b,{className:"w-5 h-5"})})]}),L&&(0,l.jsx)("div",{className:"border-b border-gray-100 bg-gray-50/50 animate-fade-in",children:(0,l.jsxs)("div",{className:"p-4 space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"画面比例"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:k.map(e=>(0,l.jsx)("button",{onClick:()=>H(a=>({...a,width:e.width,height:e.height})),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(D.width===e.width&&D.height===e.height?"bg-gray-900 text-white":"bg-white text-gray-700 border border-gray-200 hover:border-gray-300"),children:e.name},e.name))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"风格"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:C.map(e=>{let a=e.icon;return(0,l.jsxs)("button",{onClick:()=>H(a=>({...a,style:e.id})),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(D.style===e.id?"bg-gray-900 text-white":"bg-white text-gray-700 border border-gray-200 hover:border-gray-300"),children:[(0,l.jsx)(a,{className:"w-4 h-4"}),e.name]},e.id)})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"质量"}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:M.map(e=>(0,l.jsxs)("button",{onClick:()=>H(a=>({...a,quality:e.id})),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(D.quality===e.id?"bg-gray-900 text-white":"bg-white text-gray-700 border border-gray-200 hover:border-gray-300"),children:[e.name,(0,l.jsxs)("span",{className:"ml-1 text-xs opacity-70",children:["(",e.desc,")"]})]},e.id))})]})]})}),(0,l.jsx)("div",{className:"flex-1 overflow-y-auto p-4 lg:p-8",children:o?(0,l.jsxs)("div",{className:"max-w-4xl mx-auto animate-fade-in",children:[(0,l.jsx)("div",{className:"bg-gray-100 rounded-2xl overflow-hidden mb-4",children:(0,l.jsx)("img",{src:o.url,alt:o.prompt,className:"w-full h-auto max-h-[70vh] object-contain"})}),(0,l.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("p",{className:"text-gray-800 mb-2",children:o.prompt}),(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm text-gray-500",children:[(0,l.jsxs)("span",{className:"px-2 py-1 bg-gray-100 rounded",children:[o.params.width,"\xd7",o.params.height]}),(0,l.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded",children:null===(e=C.find(e=>e.id===o.params.style))||void 0===e?void 0:e.name}),(0,l.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded",children:V(o.timestamp)})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>U(o),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"下载",children:(0,l.jsx)(v,{className:"w-5 h-5"})}),(0,l.jsx)("button",{onClick:()=>_(o),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"分享",children:(0,l.jsx)(j,{className:"w-5 h-5"})})]})]})]}):(0,l.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:[(0,l.jsx)("div",{className:"w-24 h-24 bg-gray-100 rounded-2xl flex items-center justify-center mb-4",children:(0,l.jsx)(m,{className:"w-10 h-10"})}),(0,l.jsx)("p",{className:"text-lg font-medium text-gray-600 mb-2",children:"开始创作"}),(0,l.jsx)("p",{className:"text-sm",children:"输入描述，生成你的第一张 AI 图像"})]})}),(0,l.jsx)("div",{className:"border-t border-gray-100 p-4",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto",children:[E&&(0,l.jsxs)("div",{className:"mb-3 flex items-center gap-2",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("img",{src:E,alt:"Uploaded",className:"w-16 h-16 object-cover rounded-lg"}),(0,l.jsx)("button",{onClick:()=>{q(null),R(null)},className:"absolute -top-1 -right-1 w-5 h-5 bg-gray-800 text-white rounded-full flex items-center justify-center text-xs",children:(0,l.jsx)(u,{className:"w-3 h-3"})})]}),(0,l.jsx)("span",{className:"text-sm text-gray-500",children:"参考图已上传"})]}),(0,l.jsxs)("div",{className:"relative flex items-end gap-2 bg-gray-50 rounded-2xl p-2",children:[(0,l.jsx)("button",{onClick:()=>{var e;return null===(e=I.current)||void 0===e?void 0:e.click()},className:"p-3 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded-xl transition-colors flex-shrink-0",title:"上传图片（图生图）",children:(0,l.jsx)(f,{className:"w-5 h-5"})}),(0,l.jsx)("input",{ref:I,type:"file",accept:"image/*",onChange:e=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];if(t){q(t);let e=new FileReader;e.onloadend=()=>{R(e.result)},e.readAsDataURL(t)}},className:"hidden"}),(0,l.jsx)("textarea",{value:t,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),O())},placeholder:"描述你想要生成的图像...",className:"flex-1 bg-transparent border-0 resize-none py-3 px-2 text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-0 min-h-[44px] max-h-[200px]",rows:1,style:{height:"auto"},onInput:e=>{let a=e.target;a.style.height="auto",a.style.height=a.scrollHeight+"px"}}),(0,l.jsx)("button",{onClick:O,disabled:!t.trim()||i,className:"p-3 bg-gray-900 text-white rounded-xl hover:bg-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex-shrink-0",children:i?(0,l.jsx)(w,{className:"w-5 h-5 animate-spin"}):(0,l.jsx)(N,{className:"w-5 h-5"})})]}),(0,l.jsxs)("p",{className:"text-xs text-gray-400 mt-2 text-center",children:["按 Enter 发送，Shift + Enter 换行 \xb7 当前: ",D.width,"\xd7",D.height," \xb7 ",null===(a=C.find(e=>e.id===D.style))||void 0===a?void 0:a.name]})]})})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[441,587,358],()=>a(4984)),_N_E=e.O()}]);